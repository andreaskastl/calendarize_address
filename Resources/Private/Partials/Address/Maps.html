<div xmlns="http://www.w3.org/1999/xhtml" lang="en"
     xmlns:f="http://typo3.org/ns/TYPO3/Fluid/ViewHelpers"
     xmlns:c="http://typo3.org/ns/HDNET/Calendarize/ViewHelpers"
     xmlns:a="http://typo3.org/ns/FriendsOfTYPO3/TtAddress/ViewHelpers">

  <f:section name="googleMaps">
    <div class="my-5" id="{settings.googleMaps.id}" style="width:{settings.googleMaps.width};height:{settings.googleMaps.height}"><f:translate key="error.noJavaScript" extensionName="CalendarizeAddress" /></div>
    <script type="text/javascript" src="//maps.googleapis.com/maps/api/js?key={settings.googleMaps.key}"></script>
    <script type="text/javascript">

      function initialize() <f:format.raw>{</f:format.raw>

        var map = new google.maps.Map(document.getElementById('{settings.googleMaps.id}'), <f:format.raw>{</f:format.raw>
          zoom: {settings.googleMaps.zoom},
          center: new google.maps.LatLng({address.latitude},{address.longitude}),
          mapTypeId: '{settings.googleMaps.mapTypeId}'
        <f:format.raw>}</f:format.raw>);

        var marker = new google.maps.Marker(<f:format.raw>{</f:format.raw>
          position: new google.maps.LatLng({address.latitude},{address.longitude}),
          map: map,
          title: '{address.name}'
        <f:format.raw>}</f:format.raw>);

        var infowindow = new google.maps.InfoWindow(<f:format.raw>{</f:format.raw>
          content: '<p><b>{address.name}</b></p>'
        <f:format.raw>}</f:format.raw>);

        marker.addListener('click', function() <f:format.raw>{</f:format.raw>
         infowindow.open(map, marker);
        <f:format.raw>}</f:format.raw>);
      <f:format.raw>}</f:format.raw>

      google.maps.event.addDomListener(window, 'load', initialize);

    </script>
</f:section>

</div>